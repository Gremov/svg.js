clone_depth: 1

# use Windows Server 2016 (https://appveyor.tenderapp.com/discussions/questions/3424-confusion-about-how-to-change-to-os)
image: Visual Studio 2017

# Install scripts. (runs after repo cloning)
install:
  # install modules
  - appveyor-retry npm install

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - ps: Write-Host (Get-WmiObject -class Win32_OperatingSystem).Caption
  - node --version
  - npm --version
  # run tests
  - npm run test:windows

# Don't actually build.
build: off

# build cache to preserve files/folders between builds
cache:
  - node_modules  # local npm modules
